---
layout: post
title: Hazelcast Spring Boot 적용하기 
date: 2025-07-14
Author: Geon Son
categories: Spring
tags: [Spring]
comments: true
toc: true    
---

> 신규 프로젝트 Hazelcast 도입기 (네이버)
https://www.youtube.com/watch?v=Ox2ehB8obx8

운영하던 서비스의 JDK17로 업데이트하는 프로젝트를 진행하였다. JDK을 업데이트 하면서 Spring Boot 버전도 3.3으로 업데이트 하는데
기존에 사용하던 ehcache 2가 JDK17을 지원하지 않았다. ehcache3로 변경하는 방법도 있지만 JDK17과 완벽하게 맞지는 않는다는 점,
이미 프로젝트에 Mybatis cache로 Hazalcast를 사용하고 있다는 점과 Hazalcast를 활용하면 여러 인스턴스에 캐시를 공유 하여 
일관된 캐시를 유지 할수 있다는 점도 장점 이라고 생각하여 기존 적용보다 확대 적용하기로 하였다.

# 1. 프로젝트 구성

인스턴스 입장으로만 보면 이프로젝트는 4개의 VM에 각각 3개의 인스턴스를 상시 실행하는 구조로 되어 있다. 
다행히 VM은 모두 같은 IDC에 있어서 사설 IP로 통신이 가능한 형태 이다. 
다만 VM에서 사용할수 있는 메모리 총량이 32G로 작은편이라 다소 위험할수 있지만 캐시의 백업은 설정하지 않았다.

# 2. Hazalcast 설정
Hazalcast를 설정하면 첫번째로 정해야하는 것은 클러스터 이름이다. Hazalcast는 연결되 노드의 캐시를 구분할때
처음 확인하는 것이 클러스터 명이기 때문이다. 클러스터명을 설정하지 않으면 "dev"라는 클러스터 명으로 자동 설정된다.
따라서 같은 네트워크 상에 있는 Hazalcast를 설정한다면 고유한 클러스터 명을 설정하여 캐싱이 겹치는 일을 막아야 한다.

두번째로 인스턴스 명을 설정하는 것이다. 인스턴스 명은 노드를 연결하는데 직접적으로 사용되지는 않는다. 
인스턴스 명은 클러스터 내부에서 모니터링이나 캐시가 저장된 위치를 지정하는 확인하는 용도로 사용된다. 
반드시 필요하지는 않지만 운영에는 필요한 기능이다.

## 2.1 Hazalcast 설정 - join
Hazalcast의 노드 끼리 서로 join을 하는 방법은  multi-cast와 tcp-ip 설정 하는 방법이 있다. 운영 환경에서는 
연결되는 노드의 조건을 조금 더 상세하게 설정할수 있기 때문에 여러가지 장점이 있다.
